{"is_source_file": true, "format": "Python", "description": "This file contains CRUD operations for a food delivery backend, including functions to create, read, update, and list entities such as users, restaurants, menu items, orders, payments, and deliveries. It also includes internal helper functions like _money_sum.", "external_files": ["src/models/models"], "external_methods": ["sqlalchemy.select", "sqlalchemy.orm.Session", "session.add", "session.commit", "session.refresh", "session.scalar", "session.get", "session.add_all", "session.flush", "select", "select().where()", "select().order_by()"], "published": ["create_user", "get_user_by_email", "list_restaurants", "get_restaurant", "list_menu_items_for_restaurant", "get_menu_item", "create_order", "get_order", "set_order_status", "upsert_payment_for_order", "get_payment_by_provider_payment_id", "create_delivery", "get_delivery_by_id", "get_delivery_by_order_id", "list_deliveries", "assign_delivery", "set_delivery_status", "list_delivery_status_history"], "classes": [], "methods": [{"name": "Decimal _money_sum(values: list[Decimal])", "description": "Calculates the sum of a list of Decimal values, initializing the total to 0.00.", "scope": "", "scopeKind": ""}, {"name": "Delivery assign_delivery(db: Session, *, delivery_id: int, delivery_person_id: int, eta_minutes: Optional[int] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Delivery create_delivery(db: Session, *, order_id: int, delivery_person_id: Optional[int] = None, eta_minutes: Optional[int] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Order create_order( db: Session, *, user_id: int, restaurant_id: int, delivery_address: Optional[str], items: list[dict], )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "User create_user(db: Session, *, email: str, name: str, role: str = \"customer\", hashed_password: Optional[str] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Delivery] get_delivery_by_id(db: Session, *, delivery_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Delivery] get_delivery_by_order_id(db: Session, *, order_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[MenuItem] get_menu_item(db: Session, *, menu_item_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Order] get_order(db: Session, *, order_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Payment] get_payment_by_provider_payment_id(db: Session, *, provider_payment_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Restaurant] get_restaurant(db: Session, *, restaurant_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[User] get_user_by_email(db: Session, *, email: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[Delivery] list_deliveries(db: Session, *, delivery_person_id: Optional[int] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[DeliveryStatusHistory] list_delivery_status_history(db: Session, *, delivery_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[MenuItem] list_menu_items_for_restaurant(db: Session, *, restaurant_id: int, only_available: bool = True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list[Restaurant] list_restaurants(db: Session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Delivery set_delivery_status(db: Session, *, delivery_id: int, status: str, note: Optional[str] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Order set_order_status(db: Session, *, order_id: int, status: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Payment upsert_payment_for_order( db: Session, *, order_id: int, provider: str, amount: Decimal, status: str = \"pending\", provider_payment_id: Optional[str] = None, raw_payload: Optional[str] = None, )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select", "select().where", "select().order_by", "db.scalar", "db.get", "db.add", "db.add_all", "db.commit", "db.refresh", "db.flush"], "search-terms": ["CRUD functions", "Order creation", "Delivery assignment", "Payment handling", "restaurant menu", "delivery status history", "user retrieval", "order total calculation"], "state": 2, "file_id": 14, "knowledge_revision": 37, "git_revision": "b927feaecf1ff4cdb4b968f03130bf77cf2a85a7", "revision_history": [{"31": "522fd31268126df6cf88d0e597b3b54223ad0948"}, {"37": "b927feaecf1ff4cdb4b968f03130bf77cf2a85a7"}], "ctags": [{"_type": "tag", "name": "_money_sum", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def _money_sum(values: list[Decimal]) -> Decimal:$/", "language": "Python", "typeref": "typename:Decimal", "kind": "function", "signature": "(values: list[Decimal])"}, {"_type": "tag", "name": "assign_delivery", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def assign_delivery(db: Session, *, delivery_id: int, delivery_person_id: int, eta_minutes: Opti/", "language": "Python", "typeref": "typename:Delivery", "kind": "function", "signature": "(db: Session, *, delivery_id: int, delivery_person_id: int, eta_minutes: Optional[int] = None)"}, {"_type": "tag", "name": "create_delivery", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def create_delivery(db: Session, *, order_id: int, delivery_person_id: Optional[int] = None, eta/", "language": "Python", "typeref": "typename:Delivery", "kind": "function", "signature": "(db: Session, *, order_id: int, delivery_person_id: Optional[int] = None, eta_minutes: Optional[int] = None)"}, {"_type": "tag", "name": "create_order", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def create_order($/", "language": "Python", "typeref": "typename:Order", "kind": "function", "signature": "( db: Session, *, user_id: int, restaurant_id: int, delivery_address: Optional[str], items: list[dict], )"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def create_user(db: Session, *, email: str, name: str, role: str = \"customer\", hashed_password: /", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(db: Session, *, email: str, name: str, role: str = \"customer\", hashed_password: Optional[str] = None)"}, {"_type": "tag", "name": "get_delivery_by_id", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_delivery_by_id(db: Session, *, delivery_id: int) -> Optional[Delivery]:$/", "language": "Python", "typeref": "typename:Optional[Delivery]", "kind": "function", "signature": "(db: Session, *, delivery_id: int)"}, {"_type": "tag", "name": "get_delivery_by_order_id", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_delivery_by_order_id(db: Session, *, order_id: int) -> Optional[Delivery]:$/", "language": "Python", "typeref": "typename:Optional[Delivery]", "kind": "function", "signature": "(db: Session, *, order_id: int)"}, {"_type": "tag", "name": "get_menu_item", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_menu_item(db: Session, *, menu_item_id: int) -> Optional[MenuItem]:$/", "language": "Python", "typeref": "typename:Optional[MenuItem]", "kind": "function", "signature": "(db: Session, *, menu_item_id: int)"}, {"_type": "tag", "name": "get_order", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_order(db: Session, *, order_id: int) -> Optional[Order]:$/", "language": "Python", "typeref": "typename:Optional[Order]", "kind": "function", "signature": "(db: Session, *, order_id: int)"}, {"_type": "tag", "name": "get_payment_by_provider_payment_id", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_payment_by_provider_payment_id(db: Session, *, provider_payment_id: str) -> Optional[Pay/", "language": "Python", "typeref": "typename:Optional[Payment]", "kind": "function", "signature": "(db: Session, *, provider_payment_id: str)"}, {"_type": "tag", "name": "get_restaurant", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_restaurant(db: Session, *, restaurant_id: int) -> Optional[Restaurant]:$/", "language": "Python", "typeref": "typename:Optional[Restaurant]", "kind": "function", "signature": "(db: Session, *, restaurant_id: int)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def get_user_by_email(db: Session, *, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, *, email: str)"}, {"_type": "tag", "name": "list_deliveries", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def list_deliveries(db: Session, *, delivery_person_id: Optional[int] = None) -> list[Delivery]:$/", "language": "Python", "typeref": "typename:list[Delivery]", "kind": "function", "signature": "(db: Session, *, delivery_person_id: Optional[int] = None)"}, {"_type": "tag", "name": "list_delivery_status_history", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def list_delivery_status_history(db: Session, *, delivery_id: int) -> list[DeliveryStatusHistory/", "language": "Python", "typeref": "typename:list[DeliveryStatusHistory]", "kind": "function", "signature": "(db: Session, *, delivery_id: int)"}, {"_type": "tag", "name": "list_menu_items_for_restaurant", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def list_menu_items_for_restaurant(db: Session, *, restaurant_id: int, only_available: bool = Tr/", "language": "Python", "typeref": "typename:list[MenuItem]", "kind": "function", "signature": "(db: Session, *, restaurant_id: int, only_available: bool = True)"}, {"_type": "tag", "name": "list_restaurants", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def list_restaurants(db: Session) -> list[Restaurant]:$/", "language": "Python", "typeref": "typename:list[Restaurant]", "kind": "function", "signature": "(db: Session)"}, {"_type": "tag", "name": "set_delivery_status", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def set_delivery_status(db: Session, *, delivery_id: int, status: str, note: Optional[str] = Non/", "language": "Python", "typeref": "typename:Delivery", "kind": "function", "signature": "(db: Session, *, delivery_id: int, status: str, note: Optional[str] = None)"}, {"_type": "tag", "name": "set_order_status", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def set_order_status(db: Session, *, order_id: int, status: str) -> Order:$/", "language": "Python", "typeref": "typename:Order", "kind": "function", "signature": "(db: Session, *, order_id: int, status: str)"}, {"_type": "tag", "name": "upsert_payment_for_order", "path": "/home/kavia/workspace/code-generation/gourmet-express-216707-216717/food_delivery_backend/src/crud/crud.py", "pattern": "/^def upsert_payment_for_order($/", "language": "Python", "typeref": "typename:Payment", "kind": "function", "signature": "( db: Session, *, order_id: int, provider: str, amount: Decimal, status: str = \"pending\", provider_payment_id: Optional[str] = None, raw_payload: Optional[str] = None, )"}], "hash": "b4f8062564b9cb3dfa9ee8097d5e45ef", "format-version": 4, "code-base-name": "food_delivery_backend", "filename": "food_delivery_backend/src/crud/crud.py"}